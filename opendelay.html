<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
</head>
<body>
<a onclick="window.open('http://google.com')">works</a>
<a onclick="setTimeout(function() {window.open('http://google.com')}, 1000)">fails</a>
</body>
</html>